let t;function e(t){return t&&t.__esModule?t.default:t}var i=globalThis,l={},a={},n=i.parcelRequire94c2;null==n&&((n=function(t){if(t in l)return l[t].exports;if(t in a){var e=a[t];delete a[t];var i={id:t,exports:{}};return l[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){a[t]=e},i.parcelRequire94c2=n),(0,n.register)("27Lyk",function(t,e){Object.defineProperty(t.exports,"register",{get:()=>i,set:t=>i=t,enumerable:!0,configurable:!0});var i,l=new Map;i=function(t,e){for(var i=0;i<e.length-1;i+=2)l.set(e[i],{baseUrl:t,path:e[i+1]})}}),n("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["4Zi2e","index.461ec126.js","id7cg","bg.51ef01c9.png","2eqI5","patrol.9736c357.png","lkgDT","tanker-sprite-2.95dcef17.png"]'));var s={};s=new URL("bg.51ef01c9.png",import.meta.url).toString();var h={};h=new URL("patrol.9736c357.png",import.meta.url).toString();var r={};r=new URL("tanker-sprite-2.95dcef17.png",import.meta.url).toString();const o=document.getElementById("game-canvas"),c=o.getContext("2d");o.width=800,o.height=500;let f=0,d=0,m=0,p=0,g=!1,u=0;c.font="24px sans-serif",window.gameState={get isPaused(){return g},set isPaused(value){(g=value)?document.querySelectorAll("audio").forEach(t=>{t.paused||t.pause()}):(x.play().catch(()=>{}),S.play().catch(()=>{}),b.play().catch(()=>{}),A.play().catch(()=>{}))}};const y={metal1:document.getElementById("metal1"),metal2:document.getElementById("metal2"),metal3:document.getElementById("metal3"),metal4:document.getElementById("metal4"),metal5:document.getElementById("metal5")},x=document.getElementById("music"),S=document.getElementById("wind1"),b=document.getElementById("waves"),A=document.getElementById("ship"),C=document.getElementById("winch1"),L=document.getElementById("winch5"),M=document.getElementById("winch8"),R=document.getElementById("scrape7"),w=document.getElementById("alarm1"),T=document.getElementById("splash"),D=y.metal1,E=y.metal2,I=y.metal3,v=y.metal4,k=y.metal5,H={x:o.width/2-172,y:o.height/1.5};document.addEventListener("keydown",function(t){t.preventDefault(),"ArrowUp"===t.key&&(O.chainLength=Math.max(0,O.chainLength-5),M.volume=.25,M.play().catch(()=>{})),"ArrowDown"===t.key&&j.remainingAnchors>0&&(O.chainLength=Math.min(O.chainLength+20,O.chainLengthMax),C.volume=.25,C.play().catch(()=>{})),"ArrowLeft"===t.key&&(H.x-=5),"ArrowRight"===t.key&&(H.x+=20)});const B=new Image;B.src=e(r);const O=new class{constructor(){this.x=H.x,this.y=H.y,this.frameX=0,this.frameY=0,this.frame=0,this.spriteWidth=344,this.spriteHeight=52,this.chainLength=0,this.chainLengthMax=2e3}update(){let t=this.x-H.x,e=this.y-H.y,i=1;j.lastCableCut&&d-j.lastCableTime<300?i=.02+.012*(j.lastCableCut.difficulty||1):this.chainLength>0&&(i=this.chainLength>=j.depth?.3-.25*Math.min((this.chainLength-j.depth)/(4*j.depth),1):1-.5*Math.min(this.chainLength/j.depth,1));let l=100/i;if(H.x!=this.x&&(this.x-=t/l),H.y!=this.y&&(this.y-=e/l),d%5==0){let t=2*j.depth,e=4*j.depth,i=this.chainLength>=t&&this.chainLength<=e;if(this.chainLength<10?(this.frameY=0,this.frameX=0):this.chainLength<.5*t?(this.frameY=1,this.frameX=0):i?(.8>=Math.random()?this.frameY=0:this.frameY=1,this.frameX=2):(.01>=Math.random()&&L.play().catch(()=>{}),.96>=Math.random()?(this.frameY=0,this.frameX=1):(this.frameY=0,this.frameX=2)),this.chainLength>=j.depth){let t=Math.min((this.chainLength-j.depth)/(4*j.depth),1);if(Math.random()<=.05+.2*t){let e=[D,E,I,v,k],i=e[Math.floor(Math.random()*e.length)];i.volume=.08+.12*t,i.play().catch(()=>{}),this.frameY=1,this.frameX=2}j.isAnchorDown&&.08>=Math.random()&&(R.volume=.12+.08*t,R.play().catch(()=>{}))}}}draw(){c.drawImage(B,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.spriteWidth,this.spriteHeight)}},$=new Image;$.src=e(s);const N={x1:0,x2:o.width,y:0,width:o.width,height:o.height};function P(){N.x1-=1,N.x2-=1,N.x1<-N.width&&(N.x1=N.x2+N.width),N.x2<-N.width&&(N.x2=N.x1+N.width),c.drawImage($,N.x1,N.y,N.width,N.height),c.drawImage($,N.x2,N.y,N.width,N.height)}const F=[],W=new Image;W.src=e(h);class _{constructor(){this.x=o.width+Math.random()*o.width*.5,this.y=o.height/1.4+(40*Math.random()-20),this.frameX=0,this.frameY=0,this.distance,this.frame=0,this.spriteWidth=52,this.spriteHeight=52,this.sound=.5>=Math.random()?"alarm1":"alarm2",this.speed=.3+.4*Math.random()}update(){this.age++,this.x-=this.speed}setSpeed(t){this.speed=t}draw(){c.drawImage(W,this.frameX*this.spriteWidth,this.frameY*this.spriteHeight,this.spriteWidth,this.spriteHeight,this.x,this.y,this.spriteWidth,this.spriteHeight)}}function Y(t,e){return Math.floor(Math.random()*(e-t+1))+t}class U{constructor(t,e){this.x=t,this.y=e,this.vx=(Math.random()-.5)*2,this.vy=-2*Math.random()-.5,this.gravity=.15,this.life=1,this.decay=.05,this.size=1.5*Math.random()+1,this.color=`rgba(255, 255, 255, ${this.life})`}update(){this.x+=this.vx,this.y+=this.vy,this.vy+=this.gravity,this.life-=this.decay;let t=.6*this.life;this.color=`rgba(220, 240, 255, ${t})`}draw(){c.fillStyle=this.color,c.beginPath(),c.arc(this.x,this.y,this.size,0,2*Math.PI),c.fill()}isDead(){return this.life<=0}}const V=[];function G(t,e,i=15){for(let l=0;l<i;l++)V.push(new U(t,e))}function X(){d>5400&&d%Y(12e3,36e3)==0&&F.push(new _),u=0;for(let t=0;t<F.length;t++){if(F[t].update(),F[t].draw(),F[t].x>200&&F[t].x<700){if(F[t].setSpeed(.5),O.chainLength>0){let e=Math.abs(F[t].x-(O.x+172));e<400&&(u=Math.max(u,100*Math.exp(-e/100)))}F[t].x>400&&F[t].x<550&&(0!=O.chainLength&&(m+=2,u=Math.max(u,85)),F[t].setSpeed(.3))}else F[t].setSpeed(1);F[t].x<-52&&(f++,F.splice(t,1),t--)}}function q(){O.update(),O.draw();let t=O.x+309.6,e=O.y+52,i=5*j.depth;O.chainLength>=i&&p<i&&(w.volume=.3,w.play().catch(()=>{})),j.anchorLost&&d===j.anchorLostTime&&(G(t,e,25),T.volume=.3,T.play().catch(()=>{}),u=Math.min(100,u+20)),O.chainLength>=10&&0===p&&(G(t,e,10),T.volume=.1,T.play().catch(()=>{})),0===O.chainLength&&p>=10&&(G(t,e,Math.min(15,8+Math.floor(p/100))),T.volume=Math.min(.2,.1+p/5e3),T.play().catch(()=>{})),p=O.chainLength}const z={SCRAP:{name:"Old Scrap Cable",color:"#8b8b7a",difficulty:1,reward:1,risk:1,rarity:.35,riskIncrease:0},RESEARCH:{name:"Research Sensor Cable",color:"#5a8ca8",difficulty:1,reward:2,risk:1,rarity:.3,riskIncrease:5},FIBER:{name:"Fiber Data Cable",color:"#a8f088",difficulty:3,reward:4,risk:3,rarity:.25,riskIncrease:15},MILITARY:{name:"Military Surveillance Line",color:"#ff6b7a",difficulty:5,reward:4,risk:5,rarity:.06,riskIncrease:40},HVDC:{name:"HVDC Power Cable",color:"#ffa940",difficulty:5,reward:5,risk:5,rarity:.04,riskIncrease:35}},j=new class{constructor(){this.depth=Math.floor(this.generateRealisticDepth()),this.isAnchorDown=!1,this.draggedInMeters=0,this.cablesCut=0,this.cablesByType={SCRAP:0,RESEARCH:0,FIBER:0,MILITARY:0,HVDC:0},this.lastCableCut=null,this.lastCableTime=0,this.depthHistory=[],this.futureDepths=[],this.maxHistoryLength=30,this.maxFutureLength=30,this.depthTrend=0,this.optimalCenterDepth=3,this.optimalVariance=.3,this.remainingAnchors=2,this.anchorLost=!1,this.anchorLostTime=0,this.anchorLossReason="",this.anchorDangerStartTime=0,this.missionSuccess=!1,this.successTime=0,this.generateFutureDepths()}selectCableType(){let t=Math.random(),e=0;for(let[i,l]of Object.entries(z))if(t<(e+=l.rarity))return{type:i,...l};return{type:"SCRAP",...z.SCRAP}}generateFutureDepths(){this.futureDepths=[];let t=this.depth;for(let e=0;e<this.maxFutureLength;e++)t=.9>Math.random()?Math.floor(.92*t+.08*this.generateRealisticDepth()):.97>Math.random()?Math.floor(.75*t+.25*this.generateRealisticDepth()):Math.floor(this.generateRealisticDepth()),this.futureDepths.push(t)}updateOptimalDepth(){this.optimalCenterDepth+=(Math.random()-.5)*.05,this.optimalCenterDepth=Math.max(2.5,Math.min(3.5,this.optimalCenterDepth))}generateRealisticDepth(){let t=Math.random();return t<.7?Y(20,80):t<.9?Y(80,150):t<.98?Y(150,300):Y(300,459)}update(){if(d%600==0){if(this.depthHistory.push(this.depth),this.depthHistory.length>this.maxHistoryLength&&this.depthHistory.shift(),this.futureDepths.length>0&&(this.depth=this.futureDepths.shift()),this.futureDepths.length>0){let t;let e=this.futureDepths[this.futureDepths.length-1];t=.9>Math.random()?Math.floor(.92*e+.08*this.generateRealisticDepth()):.97>Math.random()?Math.floor(.75*e+.25*this.generateRealisticDepth()):Math.floor(this.generateRealisticDepth()),this.futureDepths.push(t)}this.updateOptimalDepth()}if(d%30==0){let t=this.depth*(this.optimalCenterDepth-this.optimalVariance),e=this.depth*(this.optimalCenterDepth+this.optimalVariance),i=this.depth*this.optimalCenterDepth,l=5*this.depth,a=1.5*e,n=O.chainLength>e&&O.chainLength<=a,s=O.chainLength>=l;if(this.isAnchorDown=O.chainLength>=t&&!s,this.isAnchorDown){let t;this.draggedInMeters+=10;let l=Math.abs(O.chainLength-i),s=i*this.optimalVariance;if(Math.random()<.0015*(t=O.chainLength<=e?1-l/s*.7:n?.15-.1*((O.chainLength-e)/(a-e)):.05)){let e=this.selectCableType();t>=1-.15*e.difficulty&&(this.cablesCut++,this.cablesByType[e.type]++,this.lastCableCut=e,this.lastCableTime=d,("MILITARY"===e.type||"HVDC"===e.type)&&(this.missionSuccess=!0,this.successTime=d),u=Math.min(100,u+e.riskIncrease),Math.random()<.1*e.difficulty&&this.remainingAnchors>0&&(this.remainingAnchors--,this.anchorLost=!0,this.anchorLostTime=d,this.anchorLossReason="cable",O.chainLength=0,w.volume=.3,w.play().catch(()=>{}),console.log(`Anchor lost from cable! Remaining: ${this.remainingAnchors}`)),e.reward>=4?(I.volume=.25,I.play().catch(()=>{}),setTimeout(()=>{v.volume=.2,v.play().catch(()=>{})},100)):e.reward>=2?(I.volume=.15,I.play().catch(()=>{})):(D.volume=.1,D.play().catch(()=>{})))}}O.chainLength>=5*this.depth?0===this.anchorDangerStartTime?this.anchorDangerStartTime=d:d-this.anchorDangerStartTime>300&&this.remainingAnchors>0&&(this.remainingAnchors--,this.anchorLost=!0,this.anchorLostTime=d,this.anchorLossReason="depth",O.chainLength=0,this.anchorDangerStartTime=0,w.volume=.3,w.play().catch(()=>{}),console.log(`Anchor lost from depth! Remaining: ${this.remainingAnchors}`)):this.anchorDangerStartTime=0}}};let K=!1;function J(){console.log("=== Initializing game ===");let e=document.getElementById("restart"),i=document.getElementById("success"),l=document.getElementById("start");e&&(e.style.display="none"),i&&(i.style.display="none");let a=document.getElementById("play");a?(console.log("Setting up play button"),a.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),console.log("Play button clicked - starting game"),l&&(l.style.display="none"),function e(){if(c.clearRect(0,0,o.width,o.height),g?(P(),q(),X()):(K||(x.volume=.75,x.play().catch(t=>console.log("Music play failed:",t)),S.volume=.005,S.play().catch(t=>console.log("Wind play failed:",t)),b.volume=.05,b.play().catch(t=>console.log("Waves play failed:",t)),A.volume=.01,A.play().catch(t=>console.log("Ship play failed:",t)),K=!0),function(){if(d%Y(2e3,6e3)==0){let t=y[`metal${Y(1,5)}`];t&&(t.volume=.1,t.play().catch(()=>{}))}}(),P(),j.update(),q(),X(),function(){for(let t=V.length-1;t>=0;t--)V[t].update(),V[t].draw(),V[t].isDead()&&V.splice(t,1)}(),d++),function(){let t;if(c.save(),j.lastCableCut&&d-j.lastCableTime<1800){let t=d-j.lastCableTime,e=(o.width-400)/2;c.globalAlpha=.95*(t<1740?1:(1800-t)/60),c.fillStyle="rgba(10, 26, 36, 0.95)",c.fillRect(e,20,400,70),c.strokeStyle=j.lastCableCut.color,c.lineWidth=3,c.strokeRect(e,20,400,70),c.fillStyle="#a8f088",c.font="bold 13px sans-serif",c.textAlign="center",c.fillText("⚓ CABLE DAMAGED",e+200,40),c.fillStyle=j.lastCableCut.color,c.font="bold 16px sans-serif",c.fillText(j.lastCableCut.name.toUpperCase(),e+200,62),c.font="11px sans-serif",c.fillStyle="#e8e8d8";let i="★".repeat(j.lastCableCut.reward),l=j.lastCableCut.risk>=4?"HIGH RISK":j.lastCableCut.risk>=3?"MEDIUM":"LOW RISK";c.fillText(`Value: ${i} | ${l}`,e+200,80),c.globalAlpha=1,c.textAlign="left"}if(j.anchorLost&&d-j.anchorLostTime<1800){let t=d-j.anchorLostTime,e=(o.width-450)/2;c.globalAlpha=.95*(t<1740?1:(1800-t)/60),c.fillStyle="rgba(139, 0, 0, 0.95)",c.fillRect(e,100,450,80),c.strokeStyle="#ff6b7a",c.lineWidth=3,c.strokeRect(e,100,450,80),c.fillStyle="#ff6b7a",c.font="bold 18px sans-serif",c.textAlign="center",c.fillText("⚠ ANCHOR LOST! ⚠",e+225,125),c.fillStyle="#e8e8d8",c.font="bold 14px sans-serif";let i="cable"===j.anchorLossReason?"Cable was too strong!":"Anchor stayed too deep!";c.fillText(i,e+225,148),c.font="12px sans-serif";let l=j.remainingAnchors>0?`${j.remainingAnchors} anchor${1===j.remainingAnchors?"":"s"} remaining`:"NO ANCHORS LEFT - MISSION FAILED!";c.fillStyle=j.remainingAnchors>0?"#fffa80":"#ff6b7a",c.fillText(l,e+225,168),c.globalAlpha=1,c.textAlign="left"}if(j.missionSuccess&&d-j.successTime<3600){let t=d-j.successTime,e=(o.width-500)/2;c.globalAlpha=.98*(t<3540?1:(3600-t)/60),c.fillStyle="rgba(42, 133, 149, 0.98)",c.fillRect(e,190,500,100),c.strokeStyle="#a8f088",c.lineWidth=4,c.strokeRect(e,190,500,100),c.fillStyle="#a8f088",c.font="bold 24px sans-serif",c.textAlign="center",c.fillText("★ MISSION SUCCESS! ★",e+250,220),c.fillStyle=j.lastCableCut.color,c.font="bold 18px sans-serif",c.fillText(j.lastCableCut.name.toUpperCase()+" SEVERED",e+250,246),c.fillStyle="#e8e8d8",c.font="bold 14px sans-serif",c.fillText("Critical infrastructure disrupted!",e+250,270),c.globalAlpha=1,c.textAlign="left"}let e=Math.floor(j.depth*(j.optimalCenterDepth-j.optimalVariance)),i=Math.floor(j.depth*(j.optimalCenterDepth+j.optimalVariance)),l=j.isAnchorDown,a=5*j.depth,n=7*j.depth,s=O.chainLength>i&&O.chainLength<=n;c.fillStyle="#e8e8d8",c.font="bold 14px sans-serif";let h="⚓".repeat(j.remainingAnchors)+"✗".repeat(2-j.remainingAnchors);if(c.fillText(`Anchors: ${h} | Cables: ${j.cablesCut}`,20,30),d%60==0&&console.log(`Frame ${d}: Anchors remaining = ${j.remainingAnchors}, Display = ${h}`),c.font="bold 15px sans-serif",O.chainLength>=a){if(c.fillStyle="#ff6b7a",c.fillText(`\u{26A0} ANCHOR DANGER`,20,60),c.font="12px sans-serif",j.anchorDangerStartTime>0){let t=Math.ceil(Math.max(0,300-(d-j.anchorDangerStartTime))/60);c.fillText(`ANCHOR LOST IN ${t}s!`,20,80)}else c.fillText("TOO DEEP! Reel up now!",20,80)}else s?(c.fillStyle="#ffa940",c.fillText(`\u{26A0} TOO DEEP`,20,60),c.font="12px sans-serif",c.fillText(`Low efficiency - optimal: ${e}-${i}m`,20,80)):0===O.chainLength?(c.fillStyle="#5a8ca8",c.fillText("ANCHOR UP",20,60),c.font="12px sans-serif",c.fillText("Deploy to drag seabed",20,80)):O.chainLength<j.depth?(c.fillStyle="#5a8ca8",c.fillText("ANCHOR LOWERED",20,60),c.font="12px sans-serif",c.fillText(`Need ${j.depth-O.chainLength}m more`,20,80)):l?(c.fillStyle="#a8f088",c.fillText(`\u{2693} DRAGGING`,20,60),c.font="13px sans-serif",c.fillText(`${j.cablesCut} cables | ${(j.draggedInMeters/1e3).toFixed(1)}km`,20,80)):(c.fillStyle="#fffa80",c.fillText(`\u{26A0} DRAGGING`,20,60),c.font="12px sans-serif",c.fillText(`Target: ${e}-${i}m`,20,80));let r=o.width-180-20;c.font="bold 13px sans-serif",c.fillStyle="#e8e8d8",c.fillText("DETECTION",r,14),c.fillStyle="rgba(21, 38, 47, 0.8)",c.fillRect(r,20,180,24),t=u<30?"#a8f088":u<60?"#fffa80":"#ff6b7a";let f=u/100*180;c.fillStyle=t,c.fillRect(r,20,f,24),c.strokeStyle="#5a8ca8",c.lineWidth=2,c.strokeRect(r,20,180,24),c.font="bold 14px sans-serif",c.fillStyle="#0a1a24",c.textAlign="center",u>15&&c.fillText(`${Math.round(u)}%`,r+90,38),c.textAlign="left",c.font="11px sans-serif",c.fillStyle=t;let m="CLEAR";u>=60?m="DANGER":u>=30&&(m="CAUTION"),c.textAlign="center",c.fillText(m,r+90,58),c.textAlign="left";let p=o.width-70,g=7*j.depth;c.font="bold 10px sans-serif",c.fillStyle="#e8e8d8",c.textAlign="center",c.fillText("CHAIN",p+17.5,62),c.fillStyle="rgba(21, 38, 47, 0.8)",c.fillRect(p,70,35,140);let y=j.depth/g*140;y<=140&&(c.fillStyle="rgba(42, 133, 149, 0.4)",c.fillRect(p,70+y-1,35,2));let x=Math.min(e/g*140,140),S=Math.min(i/g*140,140),b=3.5*j.depth,A=Math.min(i/g*140,140),C=Math.min(b/g*140,140),L=Math.min(3.5*j.depth/g*140,140);S>x&&(c.fillStyle="rgba(168, 240, 136, 0.25)",c.fillRect(p,70+x,35,S-x),c.fillStyle="#a8f088",x<140&&c.fillRect(p,70+x-1,35,2),S<140&&c.fillRect(p,70+S-1,35,2)),C>A&&A<140&&(c.fillStyle="rgba(255, 169, 64, 0.25)",c.fillRect(p,70+A,35,C-A),A<140&&(c.fillStyle="#ffa940",c.fillRect(p,70+A-1,35,2))),140>L&&L<140&&(c.fillStyle="rgba(255, 107, 122, 0.3)",c.fillRect(p,70+L,35,140-L),L<140&&(c.fillStyle="#ff6b7a",c.fillRect(p,70+L-1,35,2)));let M=Math.min(O.chainLength/g*140,140);if(c.beginPath(),c.moveTo(p-5,70+M),c.lineTo(p+35+5,70+M),c.lineWidth=3,c.strokeStyle=s?"#ff6b7a":l?"#a8f088":"#5a8ca8",c.stroke(),c.strokeStyle="#5a8ca8",c.lineWidth=2,c.strokeRect(p,70,35,140),c.font="10px sans-serif",c.fillStyle="#e8e8d8",c.fillText(`${O.chainLength}m`,p+17.5,222),j.depthHistory.length>0||j.futureDepths.length>0){let t=o.height-45-20;c.font="bold 10px sans-serif",c.fillStyle="#e8e8d8",c.textAlign="left",c.fillText("SEABED",20,t-8),c.fillStyle="rgba(21, 38, 47, 0.8)",c.fillRect(20,t,180,45);let e=[...j.depthHistory,j.depth,...j.futureDepths],i=e.length,l=j.depthHistory.length,a=Math.max(...e,470),n=Math.min(...e,20),s=a-n||100;c.strokeStyle="rgba(42, 133, 149, 0.5)",c.lineWidth=2,c.beginPath();for(let a=0;a<i;a++){let h=20+a/(i-1)*180,r=t+45-(e[a]-n)/s*45;a===l?(c.stroke(),c.strokeStyle="#2a8595",c.beginPath(),c.moveTo(h,r)):0===a?c.moveTo(h,r):c.lineTo(h,r)}c.stroke();let h=20+l/(i-1)*180;c.strokeStyle="rgba(255, 169, 64, 0.6)",c.lineWidth=2,c.setLineDash([4,4]),c.beginPath(),c.moveTo(h,t),c.lineTo(h,t+45),c.stroke(),c.setLineDash([]);let r=t+45-(j.depth-n)/s*45;c.fillStyle="#ffa940",c.beginPath(),c.arc(h,r,4,0,2*Math.PI),c.fill(),c.strokeStyle="#e8e8d8",c.lineWidth=1,c.stroke(),c.strokeStyle="#5a8ca8",c.lineWidth=2,c.strokeRect(20,t,180,45),c.font="10px sans-serif",c.fillStyle="#e8e8d8",c.textAlign="left",c.fillText(`Depth: ${j.depth}m`,20,t+45+12)}if(j.cablesCut>0){let t=o.width-200,e=o.height-130;c.fillStyle="rgba(21, 38, 47, 0.8)",c.fillRect(t,e,180,110),c.strokeStyle="#5a8ca8",c.lineWidth=2,c.strokeRect(t,e,180,110),c.font="bold 10px sans-serif",c.fillStyle="#e8e8d8",c.textAlign="left",c.fillText("CABLES DAMAGED",t+10,e+15),c.font="10px sans-serif";let i=30;["HVDC","MILITARY","FIBER","RESEARCH","SCRAP"].forEach(l=>{let a=j.cablesByType[l];if(a>0){let n=z[l];c.fillStyle=n.color,c.fillText(`${a}\xd7 ${n.name}`,t+10,e+i),i+=14}}),c.font="bold 11px sans-serif",c.fillStyle="#a8f088",c.fillText(`Total: ${j.cablesCut}`,t+10,e+110-10)}c.textAlign="left",c.restore()}(),j.missionSuccess){let e=document.getElementById("success-cable");j.lastCableCut&&(e.textContent=`${j.lastCableCut.name.toUpperCase()} SEVERED`),document.getElementById("success").style.display="flex",cancelAnimationFrame(t);return}if(m>1e3||u>=100||j.remainingAnchors<=0){let e=document.getElementById("restart-title"),i=document.getElementById("restart-message");j.remainingAnchors<=0?(e.textContent="⚓ NO ANCHORS LEFT",i.textContent="All anchors lost - Mission failed!"):u>=100?(e.textContent="⚠ MISSION COMPROMISED",i.textContent="You were detected by patrol vessels"):(e.textContent="⚠ MISSION FAILED",i.textContent="Too many warnings from patrols"),document.getElementById("restart").style.display="flex",cancelAnimationFrame(t);return}t=requestAnimationFrame(e)}()},!0)):console.error("Play button not found!");let n=document.getElementById("replay");n?(console.log("Setting up replay button"),n.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),console.log("Retry Mission button clicked - reloading"),window.location.reload()},!0)):console.error("Replay button not found!");let s=document.getElementById("replay-success");s?(console.log("Setting up replay-success button"),s.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),console.log("New Mission button clicked - reloading"),window.location.reload()},!0),s.addEventListener("mousedown",function(t){console.log("New Mission mousedown event")},!0)):console.error("Replay-success button not found!"),console.log("Game initialization complete")}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",J):J(),document.addEventListener("fullscreenchange",function(){if(document.fullscreenElement){let t,e;let i=window.innerWidth,l=window.innerHeight;i/l>1.6?t=1.6*(e=l):e=(t=i)/1.6,o.style.width=t+"px",o.style.height=e+"px",o.width=800,o.height=500}else o.style.width="800px",o.style.height="500px",o.width=800,o.height=500;c.font="24px sans-serif"});
//# sourceMappingURL=index.461ec126.js.map
